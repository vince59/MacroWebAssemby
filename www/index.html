<!doctype html><meta charset="utf-8" />
<pre id="out">Ouvre la console (F12)</pre>
<script type="module">
  const td=new TextDecoder(), te=new TextEncoder();
  let mem;
  const gaufre={invoke(nptr,nlen,aptr,alen,rptr,rcap){
    const u8=new Uint8Array(mem.buffer);
    const name=td.decode(u8.subarray(nptr,nptr+nlen));
    const args=alen?JSON.parse(td.decode(u8.subarray(aptr,aptr+alen))):[];
    const fn=name.split('.').reduce((o,k)=>o?.[k], globalThis);
    let res; try{ res=fn(...args); }catch(e){ res={error:String(e)}; }
    let json=JSON.stringify(res); if(json===undefined) json="null";
    const out=te.encode(json); u8.set(out.subarray(0,rcap), rptr); return Math.min(out.length,rcap);
  }};
  const {instance}=await WebAssembly.instantiateStreaming(fetch("./binary.wasm?v="+Date.now()), { gaufre });
  mem=instance.exports.memory;
  instance.exports.main();
</script>
